# ğŸ—ï¸ æ¶æ„è®¾è®¡æ–‡æ¡£

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·ç•Œé¢å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   é¦–é¡µ      â”‚  â”‚ åˆ›å»ºä»»åŠ¡    â”‚  â”‚ æµè§ˆä»»åŠ¡    â”‚    â”‚
â”‚  â”‚  (Hero)     â”‚  â”‚ (åŠ å¯†é¢„ç®—)  â”‚  â”‚ (ä»»åŠ¡åˆ—è¡¨)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           Next.js 14 + TailwindCSS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯é€»è¾‘å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  fhevm.js           â”‚  contract.js              â”‚   â”‚
â”‚  â”‚  - initFHEVM()      â”‚  - getContract()         â”‚   â”‚
â”‚  â”‚  - encryptValue()   â”‚  - createJob()           â”‚   â”‚
â”‚  â”‚  - decryptValue()   â”‚  - submitProposal()      â”‚   â”‚
â”‚  â”‚  - generatePermit() â”‚  - acceptProposal()      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           Ethers.js v6 + fhevmjs                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ JSON-RPC / Web3
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åŒºå—é“¾å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    FreelanceMarketplace.sol (Sepolia)            â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚  â”‚ Job Storage â”‚  â”‚  Proposal   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚  - euint64  â”‚  â”‚   Storage   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚  - status   â”‚  â”‚  - euint64  â”‚               â”‚  â”‚
â”‚  â”‚  â”‚  - escrow   â”‚  â”‚  - status   â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  Functions:                                       â”‚  â”‚
â”‚  â”‚  - createJob() â†’ åŠ å¯†é¢„ç®—                        â”‚  â”‚
â”‚  â”‚  - submitProposal() â†’ åŠ å¯†æŠ¥ä»·                   â”‚  â”‚
â”‚  â”‚  - acceptProposal() â†’ åŒ¹é…                       â”‚  â”‚
â”‚  â”‚  - completeJob() â†’ é‡Šæ”¾èµ„é‡‘                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              Zama FHEVM (TFHE Library)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµå›¾

### 1. åˆ›å»ºä»»åŠ¡æµç¨‹

```
ç”¨æˆ·è¾“å…¥é¢„ç®— (1.0 ETH)
       â”‚
       â–¼
å®¢æˆ·ç«¯åŠ å¯† (fhevm.js)
  encryptValue(1.0 ETH)
       â”‚
       â–¼
ç”Ÿæˆå¯†æ–‡ + Proof
  {data: 0x..., proof: 0x...}
       â”‚
       â–¼
æäº¤åˆ°åˆçº¦
  createJob(title, desc, encrypted, proof, deadline)
       â”‚
       â–¼
åˆçº¦éªŒè¯å¹¶å­˜å‚¨
  euint64 budget = TFHE.asEuint64(encrypted, proof)
  TFHE.allowThis(budget)
  TFHE.allow(budget, employer)
       â”‚
       â–¼
å‘é€äº‹ä»¶
  emit JobCreated(jobId, employer, title, deadline)
       â”‚
       â–¼
å‰ç«¯æ˜¾ç¤º
  "ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼é¢„ç®—å·²åŠ å¯†"
```

### 2. æäº¤æŠ¥ä»·æµç¨‹

```
è‡ªç”±èŒä¸šè€…è¾“å…¥æŠ¥ä»· (0.8 ETH)
       â”‚
       â–¼
å®¢æˆ·ç«¯åŠ å¯†
  encryptValue(0.8 ETH)
       â”‚
       â–¼
ç”Ÿæˆå¯†æ–‡ + Proof
       â”‚
       â–¼
æäº¤åˆ°åˆçº¦
  submitProposal(jobId, encryptedBid, proof, coverLetter)
       â”‚
       â–¼
åˆçº¦å­˜å‚¨å¹¶æˆæƒ
  euint64 bid = TFHE.asEuint64(encryptedBid, proof)
  TFHE.allow(bid, freelancer)     // è‡ªå·±å¯è§
  TFHE.allow(bid, employer)       // é›‡ä¸»å¯è§
       â”‚
       â–¼
å‘é€äº‹ä»¶
  emit ProposalSubmitted(proposalId, jobId, freelancer)
       â”‚
       â–¼
å‰ç«¯æ˜¾ç¤º
  "æŠ¥ä»·å·²æäº¤ï¼é‡‘é¢ä¿å¯†"
```

### 3. æ¥å—ææ¡ˆæµç¨‹

```
é›‡ä¸»æŸ¥çœ‹ææ¡ˆåˆ—è¡¨
       â”‚
       â–¼
é€‰æ‹©ææ¡ˆIDå¹¶è§£å¯†æŠ¥ä»·
  generatePermit(contract, signer)
  decryptValue(bidHandle, contract, user, signature)
       â”‚
       â–¼
æ˜¾ç¤ºæ˜æ–‡æŠ¥ä»·
  "è‡ªç”±èŒä¸šè€…A: 0.8 ETH"
       â”‚
       â–¼
é›‡ä¸»æ¥å—ææ¡ˆ
  acceptProposal(proposalId)
       â”‚
       â–¼
åˆçº¦æ›´æ–°çŠ¶æ€
  proposal.status = Accepted
  job.status = Assigned
  job.assignedFreelancer = freelancer
       â”‚
       â–¼
å‘é€äº‹ä»¶
  emit ProposalAccepted(proposalId, jobId, freelancer)
```

## æ ¸å¿ƒæ¨¡å—è®¾è®¡

### æ™ºèƒ½åˆçº¦æ¨¡å—

#### FreelanceMarketplace.sol

```solidity
// æ•°æ®ç»“æ„
struct Job {
    uint256 id;
    address employer;
    string title;
    string description;
    euint64 encryptedBudget;    // ğŸ” åŠ å¯†é¢„ç®—
    JobStatus status;
    address assignedFreelancer;
    uint256 createdAt;
    uint256 deadline;
    bool fundsLocked;
    uint256 lockedAmount;
}

struct Proposal {
    uint256 id;
    uint256 jobId;
    address freelancer;
    euint64 encryptedBid;       // ğŸ” åŠ å¯†æŠ¥ä»·
    string coverLetter;
    ProposalStatus status;
    uint256 submittedAt;
}
```

#### å…³é”®å‡½æ•°

| å‡½æ•° | æƒé™ | åŠŸèƒ½ | Gas ä¼°ç®— |
|------|------|------|----------|
| `createJob()` | ä»»ä½•äºº | åˆ›å»ºä»»åŠ¡ï¼ŒåŠ å¯†é¢„ç®— | ~200k |
| `submitProposal()` | ä»»ä½•äºº | æäº¤ææ¡ˆï¼ŒåŠ å¯†æŠ¥ä»· | ~150k |
| `acceptProposal()` | é›‡ä¸» | æ¥å—ææ¡ˆ | ~100k |
| `completeJob()` | é›‡ä¸» | å®Œæˆä»»åŠ¡ï¼Œé‡Šæ”¾èµ„é‡‘ | ~80k |
| `cancelJob()` | é›‡ä¸» | å–æ¶ˆä»»åŠ¡ï¼Œé€€æ¬¾ | ~60k |

### å‰ç«¯æ¨¡å—

#### fhevm.js - FHE å·¥å…·åº“

```javascript
// æ ¸å¿ƒå‡½æ•°
initFHEVM()           // åˆå§‹åŒ– FHEVM å®ä¾‹
encryptValue(value)   // åŠ å¯†æ•°å€¼
decryptValue(handle)  // è§£å¯†æ•°å€¼
generatePermit()      // ç”Ÿæˆè®¿é—®è®¸å¯
```

#### contract.js - åˆçº¦äº¤äº’

```javascript
// æ ¸å¿ƒå‡½æ•°
getContract(signer)          // è·å–åˆçº¦å®ä¾‹
createJob(...)               // åˆ›å»ºä»»åŠ¡
submitProposal(...)          // æäº¤ææ¡ˆ
acceptProposal(proposalId)   // æ¥å—ææ¡ˆ
completeJob(jobId)           // å®Œæˆä»»åŠ¡
getJob(jobId)                // è·å–ä»»åŠ¡è¯¦æƒ…
```

## å®‰å…¨è®¾è®¡

### è®¿é—®æ§åˆ¶çŸ©é˜µ

| æ•°æ® | é›‡ä¸» | è‡ªç”±èŒä¸šè€…A | è‡ªç”±èŒä¸šè€…B | å…¶ä»–äºº |
|------|------|------------|------------|--------|
| ä»»åŠ¡é¢„ç®— | âœ… å¯è§£å¯† | âœ… å¯è§£å¯†ï¼ˆè¢«é€‰ä¸­åï¼‰ | âŒ ä¸å¯è§ | âŒ ä¸å¯è§ |
| æŠ¥ä»·A | âœ… å¯è§£å¯† | âœ… å¯è§£å¯† | âŒ ä¸å¯è§ | âŒ ä¸å¯è§ |
| æŠ¥ä»·B | âœ… å¯è§£å¯† | âŒ ä¸å¯è§ | âœ… å¯è§£å¯† | âŒ ä¸å¯è§ |
| æ‰˜ç®¡é‡‘é¢ | âœ… å…¬å¼€ | âœ… å…¬å¼€ | âœ… å…¬å¼€ | âœ… å…¬å¼€ |

### å®ç°æ–¹å¼

```solidity
// åˆ›å»ºä»»åŠ¡æ—¶è®¾ç½®è®¿é—®æƒé™
TFHE.allowThis(budget);        // åˆçº¦å¯è®¿é—®ï¼ˆç”¨äºé€»è¾‘ï¼‰
TFHE.allow(budget, employer);  // é›‡ä¸»å¯è§£å¯†

// æäº¤æŠ¥ä»·æ—¶è®¾ç½®è®¿é—®æƒé™
TFHE.allow(bid, freelancer);   // è‡ªå·±å¯è§£å¯†
TFHE.allow(bid, employer);     // é›‡ä¸»å¯è§£å¯†
```

## æ€§èƒ½ä¼˜åŒ–

### Gas ä¼˜åŒ–ç­–ç•¥

1. **æ‰¹é‡æ“ä½œ**
   - ä½¿ç”¨äº‹ä»¶è€Œéå­˜å‚¨æŸ¥è¯¢å†å²
   - åªå­˜å‚¨å¿…è¦çš„é“¾ä¸Šæ•°æ®

2. **æ•°æ®ç»“æ„ä¼˜åŒ–**
   - ä½¿ç”¨æ˜ å°„è€Œéæ•°ç»„
   - ç´§å‡‘çš„ç»“æ„ä½“æ‰“åŒ…

3. **è®¡ç®—ä¼˜åŒ–**
   - ç¼“å­˜é‡å¤è®¡ç®—
   - é¿å…ä¸å¿…è¦çš„çŠ¶æ€è¯»å–

### å‰ç«¯æ€§èƒ½

1. **æ‡’åŠ è½½**
   - æŒ‰éœ€åŠ è½½ç»„ä»¶
   - è™šæ‹Ÿæ»šåŠ¨é•¿åˆ—è¡¨

2. **ç¼“å­˜ç­–ç•¥**
   - ä½¿ç”¨ SWR ç¼“å­˜è¯·æ±‚
   - æœ¬åœ°å­˜å‚¨å¸¸ç”¨æ•°æ®

3. **ç½‘ç»œä¼˜åŒ–**
   - æ‰¹é‡RPCè¯·æ±‚
   - WebSocketå®æ—¶æ›´æ–°

## æ‰©å±•æ€§è®¾è®¡

### Phase 1ï¼ˆå½“å‰ï¼‰
- âœ… åŸºç¡€åŠŸèƒ½
- âœ… FHE åŠ å¯†
- âœ… ç®€å•æ‰˜ç®¡

### Phase 2ï¼ˆæœªæ¥ï¼‰
- å¤šå¸ç§æ”¯ä»˜
- é‡Œç¨‹ç¢‘ä»˜æ¬¾
- è¯„ä»·ç³»ç»Ÿ

### Phase 3ï¼ˆè¿œæœŸï¼‰
- äº‰è®®ä»²è£
- DAO æ²»ç†
- è·¨é“¾æ”¯æŒ

## æŠ€æœ¯æ ˆè¯¦æƒ…

### æ™ºèƒ½åˆçº¦
- **Solidity**: 0.8.24
- **Zama FHEVM**: æœ€æ–°ç‰ˆ
- **OpenZeppelin**: 5.0.0
- **Hardhat**: 2.19.0

### å‰ç«¯
- **Next.js**: 14.0.0
- **React**: 18.2.0
- **Ethers.js**: 6.9.0
- **fhevmjs**: 0.5.0
- **TailwindCSS**: 3.3.0

### å¼€å‘å·¥å…·
- **TypeScript**: 5.0.0
- **ESLint**: 8.0.0
- **Prettier**: 3.0.0

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- åˆçº¦åŠŸèƒ½æµ‹è¯•
- è¾¹ç•Œæ¡ä»¶æµ‹è¯•
- å¤±è´¥åœºæ™¯æµ‹è¯•

### é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•
- å‰åç«¯é›†æˆæµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- Gas æ¶ˆè€—æµ‹è¯•
- å¹¶å‘å‹åŠ›æµ‹è¯•

## éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰ç«¯éƒ¨ç½² (Vercel)           â”‚
â”‚  - Next.js é™æ€é¡µé¢                 â”‚
â”‚  - CDN åŠ é€Ÿ                         â”‚
â”‚  - HTTPS æ”¯æŒ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ JSON-RPC
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Sepolia æµ‹è¯•ç½‘                   â”‚
â”‚  - FreelanceMarketplace.sol         â”‚
â”‚  - åœ¨ Etherscan éªŒè¯                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç›‘æ§å’Œæ—¥å¿—

### åˆçº¦äº‹ä»¶
- `JobCreated` - ä»»åŠ¡åˆ›å»º
- `ProposalSubmitted` - ææ¡ˆæäº¤
- `ProposalAccepted` - ææ¡ˆæ¥å—
- `JobCompleted` - ä»»åŠ¡å®Œæˆ
- `FundsWithdrawn` - èµ„é‡‘æå–

### å‰ç«¯æ—¥å¿—
- é”™è¯¯è¿½è¸ª
- æ€§èƒ½ç›‘æ§
- ç”¨æˆ·è¡Œä¸ºåˆ†æ

---

**æ¶æ„ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2024å¹´

